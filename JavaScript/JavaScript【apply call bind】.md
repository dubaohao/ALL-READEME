# å¦‚ä½•åœ¨ JavaScript ä¸­ä½¿ç”¨ applyï¼Œcallï¼Œbind

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå‡½æ•°åŸå‹é“¾ä¸­çš„ `apply`ï¼Œ`call` å’Œ `bind` æ–¹æ³•ï¼Œå®ƒä»¬æ˜¯ `JavaScript` ä¸­æœ€é‡è¦ä¸”ç»å¸¸ä½¿ç”¨çš„æ¦‚å¿µï¼Œä¸”ä¸ `this` å…³é”®å­—å¯†åˆ‡ç›¸å…³ã€‚

è¦äº†è§£ `apply`|`call`|`bind`ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£ `JavaScript` ä¸­çš„ `Function`ï¼Œå½“ç„¶è¿™å‰ææ˜¯ä½ å¯ä»¥ç†Ÿæ–™è¿ç”¨ `this` äº†ã€‚

-[Functions](#Functions)

-[Apply ğŸ’…](Apply-ğŸ’…)

-[Call ğŸ“](Call-ğŸ“)

-[Bind â°](Bind-â°)

-[]()

## Functions

`Function` æ„é€ å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ `Function` å¯¹è±¡ã€‚ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°çš„è¯ï¼Œå¯ä»¥åŠ¨æ€åœ°åˆ›å»ºå‡ºåœ¨å…¨å±€ä½œç”¨åŸŸä¸‹çš„å‡½æ•°ã€‚

åœ¨ `JavaScript` ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç§å¯¹è±¡ï¼Œå¯ä»¥ç”±`apply`ï¼Œ`call` å’Œ `bind` æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚

è¦æ£€æŸ¥å‡½æ•°æ˜¯å¦ä¸ºä¸€ä¸ª `Function` å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç è¿›è¡Œåˆ¤æ–­ï¼Œè¯¥ä»£ç æ®µè¿”å› `true`ã€‚

```
(function () { }).constructor === Function ? console.log(true) : console.log(false);
å¤åˆ¶ä»£ç 
```

> å…¨å±€ `Function` å¯¹è±¡æ²¡æœ‰è‡ªå·±çš„æ–¹æ³•æˆ–å±æ€§ã€‚ä½†ç”±äºå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ `Function.prototype` åŸå‹é“¾ç»§æ‰¿ä¸€äº›æ–¹æ³•å’Œå±æ€§ã€‚â€Šâ€”â€ŠMDN

ä»¥ä¸‹æ˜¯å‡½æ•°åŸå‹é“¾ä¸­çš„æ–¹æ³•ï¼š

- `Function.prototype.apply()`
- `Function.prototype.bind()`
- `Function.prototype.call()`
- `Function.prototype.isGenerator()`
- `Function.prototype.toSource()`
- `Object.prototype.toSource`
- `Function.prototype.toString()`
- `Object.prototype.toString`

è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬åªè®¨è®ºå‰ä¸‰ä¸ªã€‚

## Apply ğŸ’…

> `apply()` æ˜¯å‡½æ•°åŸå‹ä¸­çš„ä¸€ä¸ªé‡è¦æ–¹æ³•ï¼Œç”¨äºè°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œ å‚æ•°ä¸ºç»™å®š `this` å’Œä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼‰ã€‚

ç±»æ•°ç»„å¯¹è±¡å¯ä»¥å‚ç…§ `NodeList` æˆ–å‡½æ•°å†…çš„ `arguments` å¯¹è±¡ã€‚

è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥è°ƒç”¨ä»»ä½•å‡½æ•°ï¼Œå¹¶æ˜¾å¼æŒ‡å®šè°ƒç”¨æ—¶ `this` çš„æŒ‡å‘ã€‚

### è¯­æ³•

```
function.apply(this,[argumentsArray])
å¤åˆ¶ä»£ç 
```

### è¿”å›å€¼

è¿”å› `this` æŒ‡å‘å‡½æ•°çš„è°ƒç”¨ç»“æœã€‚

### æè¿°

`apply()` æ–¹æ³•ä½¿å¯¹è±¡ `x` ä¸­çš„å‡½æ•°/å¯¹è±¡å¯ä»¥è¢«å¦ä¸€ä¸ªå¯¹è±¡ `y` è°ƒç”¨ã€‚

### ä¾‹å­

### 1.

```
var array = ['a', 'b'];
var elements = [1, 2, 3];
array.push(elements);
console.log(array);  // ['a', 'b', [1, 2, 3]]
å¤åˆ¶ä»£ç 
```

ä»¥ä¸Šä»£ç ä¸­ï¼Œå½“æˆ‘ä»¬å°†ä¸€ä¸ªæ•°ç»„ `push` è¿›å¦ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œæ•´ä¸ªæ•°ç»„è¢«è§†ä¸ºä¸€ä¸ªå…ƒç´ ç›´æ¥ `push` è¿›å»ã€‚ä½†å¦‚æœæˆ‘ä»¬æƒ³è¦å°†æ•°ç»„ `elemennts` ä¸­çš„å…ƒç´ åˆ†åˆ« `push` è¿›æ•°ç»„ `array` ä¸­å‘¢ï¼Ÿå½“ç„¶æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥è¿™æ ·åšï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ `apply()`ã€‚

```
var array = ['a', 'b'];
var elements = [1, 2, 3];
array.push.apply(array, elements);
console.log(array); // ["a", "b", 1, 2, 3]
å¤åˆ¶ä»£ç 
```

è¯¥ä¾‹ä¸­ï¼Œä½¿ç”¨ `apply` è¿æ¥ç»™å®šæ•°ç»„ï¼Œå‚æ•°ä¸ºæ•°ç»„ `elements`ï¼Œ`this` æŒ‡å‘å˜é‡ `array`ï¼Œå®ç°æ•°ç»„ `elements` ä¸­çš„å…ƒç´ è¢« `push` è¿› `this` æŒ‡å‘çš„å¯¹è±¡ï¼ˆ`array`ï¼‰ä¸­ã€‚æœ€ç»ˆè¿”å›çš„ç»“æœä¸ºç¬¬äºŒä¸ªæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è¢« `push` è¿› `this` æŒ‡å‘çš„æ•°ç»„ä¸­ã€‚

### 2.

```
var numbers = [53, 65, 25, 37, 78];
console.log(Math.max(numbers)); //NaN
å¤åˆ¶ä»£ç 
```

`JS` ä¸­ `max` å‡½æ•°ç”¨äºæŸ¥æ‰¾ç»™å®šå…ƒç´ çš„æœ€å¤§å€¼ã€‚ä½†æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼Œå¦‚æœç»™å®šå€¼ä¸ºæ•°ç»„ï¼Œè¿”å›ç»“æœä¸º `NaN`ã€‚å½“ç„¶ï¼Œ`JavaScript` ä¸­æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥è§£å†³ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ `apply`ã€‚

```
var numbers = [53, 65, 25, 37, 78];
console.log(Math.max.apply(null, numbers)); //78
å¤åˆ¶ä»£ç 
```

å½“æˆ‘ä»¬ä½¿ç”¨ `apply` è°ƒç”¨ `Math.max()` æ—¶ï¼Œå¾—åˆ°äº†æœŸæœ›ç»“æœã€‚`apply` å°† `numbers` ä¸­æ‰€æœ‰å€¼ä½œä¸ºå•ç‹¬çš„å‚æ•°ï¼Œç„¶åå†è°ƒç”¨ `max` è¿›è¡Œå¤„ç†ï¼Œæœ€ç»ˆè¿”å›æ•°ç»„ä¸­çš„æœ€å¤§å€¼ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ `null` ä»£æ›¿äº† `this`ã€‚ç”±äºæä¾›çš„å‚æ•°æ˜¯æ•°å­—æ•°ç»„ï¼Œå³ä½¿ä½¿ç”¨äº† `this`ï¼Œå®ƒä¹Ÿä»ä¼šæŒ‡å‘åŒä¸€ä¸ªæ•°ç»„ï¼Œæœ€ç»ˆå¾—åˆ°ç›¸åŒçš„ç»“æœã€‚å› æ­¤ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥çœç•¥ `this`ï¼Œæ”¹ç”¨ `null` ä»£æ›¿ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ`apply` å‡½æ•°ä¸­çš„ `this` å‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ã€‚

## Call ğŸ“

> `call()` æ–¹æ³•ç”¨äºè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°ä¸ºç»™å®š `this` å’Œè‹¥å¹²ä¸ªå•ç‹¬æŒ‡å®šçš„å‚æ•°åºåˆ—ã€‚

è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥è°ƒç”¨ä»»ä½•å‡½æ•°ï¼Œå¹¶æ˜¾å¼æŒ‡å®šè°ƒç”¨æ—¶ `this` çš„æŒ‡å‘ã€‚

è¿™ä¸ `apply` éå¸¸ç›¸ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ `apply` ä»¥æ•°ç»„æˆ–ç±»æ•°ç»„å¯¹è±¡çš„å½¢å¼æ¥å—å‚æ•°ï¼Œè€Œ `call` çš„å‚æ•°æ˜¯å•ç‹¬æä¾›çš„ã€‚

### è¯­æ³•

```
function.call(thisArg,arg1,arg2,...)
å¤åˆ¶ä»£ç 
```

### è¿”å›å€¼

è¿”å› `this` æŒ‡å‘ä¸”å‚æ•°ä¸ºç»™å®šå‚æ•°çš„å‡½æ•°è°ƒç”¨ç»“æœã€‚

### æè¿°

`call()` æ–¹æ³•ä½¿å¯¹è±¡ `x` ä¸­çš„ä¸€ä¸ªå‡½æ•°/å¯¹è±¡å¯ä»¥è¢«å¯¹è±¡ `y` è°ƒç”¨ã€‚

### ä¾‹å­

### 1.

```
function Product(name, price) {
    this.name = name;
    this.price = price;
}
function Pizza(name, price) {
    Product.call(this, name, price);
    this.category = 'pizza';
}
function Toy(name, price) {
    Product.call(this, name, price);
    this.category = 'toy';
}

var pizza = new Pizza('margherita', 50);
var toy = new Toy('robot', 40);
console.log(toy); // Toy {name: "robot", price: 40, category: "toy"}
console.log(pizza); // Pizza {name: "margherita", price: 50, category: "pizza"}
å¤åˆ¶ä»£ç 
```

è¿™æ˜¯æ„é€ å‡½æ•°é“¾çš„ä¸€ä¸ªä¾‹å­ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªå‡½æ•°ä¸­éƒ½è°ƒç”¨äº† `Product` çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ `call` å°† `Product` å¯¹è±¡çš„å±æ€§åˆ†åˆ«ä¸ `Pizza` å’Œ `Toy` è¿æ¥åœ¨ä¸€èµ·ã€‚

å½“åˆ›å»ºäº† `Pizza` å’Œ `Toy` å¯¹è±¡çš„å®ä¾‹å¹¶è¾“å‡ºæ—¶ï¼Œç»“æœæ˜¾ç¤ºå…¶å…·æœ‰ `name`,`price` å’Œ `category` ä¸‰ä¸ªå±æ€§ï¼Œä½†æˆ‘ä»¬åªå®šä¹‰äº† `category`ä¸€ä¸ªå±æ€§ã€‚è€Œå±æ€§`name` å’Œ `price` åˆ™æ˜¯ç”±äºå·²ç»åœ¨ `Product` å¯¹è±¡ä¸­å®šä¹‰å¹¶åº”ç”¨ï¼Œå¯é€šè¿‡ `Product` å¯¹è±¡çš„é“¾å¼æ„é€ å‡½æ•°è·å¾—ã€‚å°†ä»¥ä¸Šä»£ç ç¨ä½œæ”¹åŠ¨å³å¯å®ç°ç»§æ‰¿ã€‚

### 2.

```
function sleep(){
    var reply=[this.animal,'typically sleep between',this.sleepDuration].join(' ');
    console.log(reply); // I typically sleep between 12 and 16 hours
}
var obj={
    animal:'I',sleepDuration:'12 and 16 hours'
};
sleep.call(obj);
å¤åˆ¶ä»£ç 
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º `sleep` çš„å‡½æ•°ï¼Œå…¶åŒ…å«ä¸€ä¸ªæ•°ç»„ `reply` ï¼Œè¯¥æ•°ç»„ç”± `this`è¿›è¡Œå±æ€§å¯»å€å¾—åˆ°çš„å…ƒç´ ç»„æˆï¼Œè¿™äº›å…ƒç´ åœ¨å‡½æ•°å¤–çš„ç‹¬ç«‹å¯¹è±¡ä¸­å®šä¹‰ã€‚

è°ƒç”¨å‡½æ•° `sleep`ï¼Œå…¶å‚æ•°ä¸º `obj`ã€‚å¯ä»¥çœ‹åˆ° `this.animal` å’Œ `this.sleepDuration` åˆ†åˆ«å–åˆ°äº† `obj` çš„å±æ€§ï¼Œå¹¶è¾“å‡ºäº†å®Œæ•´çš„å¥å­ã€‚

## Bind â°

> å½“ `bind()` æ–¹æ³•è¢«è°ƒç”¨æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸º `this`ï¼Œå¹¶åœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶æä¾›ä¸€ä¸ªç»™å®šçš„å‚æ•°åºåˆ—ã€‚ â€Šâ€”â€ŠMDN

> è¯‘è€…æ³¨ï¼š`bind()` æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œç§°ä¸ºç»‘å®šå‡½æ•°ï¼Œå½“è°ƒç”¨è¿™ä¸ªç»‘å®šå‡½æ•°æ—¶ï¼Œç»‘å®šå‡½æ•°ä¼šä»¥åˆ›å»ºå®ƒæ—¶ä¼ å…¥`bind()` æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸º `this`ï¼Œç¬¬äºŒä¸ªä»¥åŠä»¥åçš„å‚æ•°ï¼ŒåŠ ä¸Šç»‘å®šå‡½æ•°è¿è¡Œæ—¶æœ¬èº«çš„å‚æ•°ï¼ŒæŒ‰ç…§é¡ºåºä½œä¸ºåŸå‡½æ•°çš„å‚æ•°æ¥è°ƒç”¨åŸå‡½æ•°ã€‚

### è¯­æ³•

```
function.bind(this,arg1,arg2,arg3,...)
å¤åˆ¶ä»£ç 
```

### è¿”å›å€¼

è¿”å› `this` æŒ‡å‘ä¸”å‚æ•°ä¸ºç»™å®šå‚æ•°çš„å‡½æ•°å‰¯æœ¬çš„è°ƒç”¨ç»“æœã€‚

### æè¿°

`bind` æ–¹æ³•ä¸ `call` æ–¹æ³•ç±»ä¼¼ï¼Œä¸»è¦åŒºåˆ«åœ¨äº `bind` è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè€Œ `call` ä¸è¿”å›ã€‚

æ ¹æ® ECMAScript 5 è§„èŒƒï¼Œ`bind` æ–¹æ³•è¿”å›çš„å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å‡½æ•°å¯¹è±¡ï¼Œç§°ä¸ºç»‘å®šå‡½æ•°ï¼ˆ BF ï¼‰ã€‚BF ä¸­åŒ…å«åŸå§‹å‡½æ•°å¯¹è±¡ï¼Œè°ƒç”¨ BF æ—¶ä¼šæ‰§è¡Œè¯¥å‡½æ•°ã€‚

### ä¾‹å­

```
var x = 9;
var module = {
    x: 81,
    getX: function () {
        return this.x;
    }
};
console.log(module.getX()); // 81
var retrieveX = module.getX;
console.log(retrieveX()); // 9
var boundGetX = retrieveX.bind(module);
console.log(boundGetX()); // 81
å¤åˆ¶ä»£ç 
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå˜é‡ `x` å’Œä¸€ä¸ªå¯¹è±¡ `module`ï¼Œè¯¥å¯¹è±¡ä¸­è¿˜å®šä¹‰äº†ä¸€ä¸ªå±æ€§ `x` ä»¥åŠä¸€ä¸ªè¿”å› `x` å€¼çš„å‡½æ•°ã€‚

å½“è°ƒç”¨å‡½æ•° `getX` æ—¶ï¼Œå®ƒè¿”å›çš„æ˜¯å¯¹è±¡å†…å®šä¹‰çš„ `x` çš„å€¼ï¼Œè€Œä¸æ˜¯å…¨å±€ä½œç”¨åŸŸä¸­çš„ `x`ã€‚

å¦ä¸€ä¸ªå˜é‡åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜ï¼Œå¹¶è°ƒç”¨ `module`å¯¹è±¡ä¸­çš„ `getX` å‡½æ•°ã€‚ä½†ç”±äºè¯¥å˜é‡å¤„äºå…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œå› æ­¤ `getX` ä¸­çš„ `this` æŒ‡å‘å…¨å±€ä½œç”¨åŸŸä¸‹çš„ `x`ï¼Œè¿”å› 9ã€‚

æœ€ååˆå®šä¹‰äº†å¦ä¸€ä¸ªå˜é‡ `boundGetX`ï¼Œè¯¥å˜é‡è°ƒç”¨å‡½æ•° `retrieveX`ï¼Œä¸ä¹‹å‰ä¸åŒçš„æ˜¯ï¼Œè¿™æ¬¡å°†å‡½æ•° `retrieveX`ä¸å¯¹è±¡ `module` ç»‘å®šï¼Œè¿”å›çš„æ˜¯å¯¹è±¡å†… `x` çš„å€¼ã€‚è¿™æ˜¯ç”±äº `bind` å°†å‡½æ•°ä¸­çš„ `this`æŒ‡å‘å¯¹è±¡ä¸­çš„ `x` å€¼è€Œä¸æ˜¯å…¨å±€ `x`ï¼Œå› æ­¤è¾“å‡º 81ã€‚

## ç»“è®º

ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£åˆ°ä»¥ä¸Šä¸‰ç§æ–¹æ³•çš„åŸºç¡€ç”¨æ³•ï¼Œä½†ä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼šä¸ºä»€ä¹ˆè¦ç”¨ 3 ä¸ªä¸åŒçš„æ–¹æ³•å»åšç›¸åŒçš„äº‹æƒ…ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¿…é¡»åå¤ç»ƒä¹ åœ¨ä¸åŒåœºæ™¯ä¸‹å®ƒä»¬çš„ä½¿ç”¨æ–¹æ³•ï¼Œæ›´å…¨é¢åœ°äº†è§£ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•æ›´å¥½çš„ä½¿ç”¨ï¼Œè¿™è‚¯å®šä¼šè®©ä½ çš„ä»£ç æ›´æ¸…æ™°ï¼Œæ›´å¼ºå¤§ã€‚



> åŸæ–‡é“¾æ¥ï¼š[How to use the apply(ğŸ’…), call(ğŸ“), and bind(â°) methods in JavaScript](https://link.juejin.im/?target=https%3A%2F%2Fmedium.freecodecamp.org%2Fhow-to-use-the-apply-call-and-bind-methods-in-javascript-80a8e6096a90)
> åŸæ–‡ä½œè€…ï¼š[Ashay Mandwarya](https://link.juejin.im/?target=https%3A%2F%2Fmedium.freecodecamp.org%2F%40ashaymurceilago)
> è¯‘è€…ï¼š[JintNiu](https://juejin.im/user/5b847cd2e51d4538af60f8cd)
> æ¨èç†ç”±ï¼š`apply`,`call` å’Œ `bind` åœ¨é¢è¯•å’Œæ—¥å¸¸ç¼–ç ä¸­å¸¸ä¼šé‡åˆ°ï¼Œäº†è§£å’ŒæŒæ¡ä»–ä»¬çš„ç”¨æ³•å˜å¾—å°¤ä¸ºé‡è¦ã€‚

å› æ­¤ï¼Œæƒ³è¦æŒæ¡æœ¬æ–‡æ‰€è¿°å†…å®¹ï¼Œæ‚¨å¿…é¡»ç†Ÿæ‚‰ `this` å…³é”®å­—çš„æ¦‚å¿µå’Œç”¨æ³•ã€‚å¯ä»¥å‚è€ƒ[è¿™ç¯‡æ–‡ç« ](https://link.juejin.im/?target=https%3A%2F%2Fmedium.freecodecamp.org%2Fa-guide-to-this-in-javascript-e3b9daef4df1)ã€‚

> è¯‘è€…æ³¨ï¼šå¯å‚è€ƒï¼š[[è¯‘\] JavaScript ä¹‹ this æŒ‡å—](https://juejin.im/post/5c876ba96fb9a049ae08bc63)